import { createContext, useContext, useState, useEffect, type ReactNode } from "react";

export type Language = "zh" | "en" | "ms";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations: Record<Language, Record<string, string>> = {
  zh: {
    "nav.products": "产品系列",
    "nav.benefits": "品牌优势",
    "nav.howToOrder": "如何订购",
    "nav.testimonials": "客户评价",
    "header.whatsapp": "WhatsApp咨询",
    "header.shop": "前往店铺",
    "hero.fresh": "新鲜",
    "hero.noCompromise": "不将就",
    "hero.subtitle": "LOVEYOUNG 燕窝花胶 · 每日鲜炖",
    "hero.description": "拒绝防腐剂，拒绝隔夜货。我们坚持当日炖煮、冷链直达，只为给你最新鲜的滋补体验。",
    "hero.orderNow": "立即订购",
    "hero.exploreFlavors": "探索口味",
    "hero.repeatCustomers": "回头客",
    "hero.nextBatch": "下一批鲜炖",
    "hero.giftBox": "燕窝花胶礼盒",
    "hero.giftBoxDesc": "6罐装 · 每罐120g",
    "hero.original": "原味燕窝",
    "hero.redDate": "红枣枸杞",
    "hero.fishMaw": "花胶原味",
    "hero.giftPrice": "礼盒价",
    "hero.perBox": "/盒",
    "hero.whatsappOrder": "WhatsApp下单",
    "hero.bestseller": "本月热卖",
    "stats.customers": "满意客户",
    "stats.flavors": "口味选择",
    "stats.freshCycle": "新鲜周期",
    "stats.rating": "好评率",
    "products.discovery": "Flavor Discovery",
    "products.explore": "探索",
    "products.flavors": "8款口味",
    "products.viewAll": "查看全部",
    "innovation.whyDifferent": "Why Different",
    "innovation.title": "创新",
    "innovation.subtitle": "不止于此",
    "innovation.description": "我们重新定义鲜炖燕窝，用科技守护新鲜，用匠心成就品质",
    "innovation.science": "科学配比",
    "innovation.scienceSub": "Lab-Tested",
    "innovation.scienceDesc": "每份含量经过精确计算，营养成分最优配比",
    "innovation.scienceStat": "营养保留率",
    "innovation.coldChain": "冷链锁鲜",
    "innovation.coldChainSub": "Cold Chain",
    "innovation.coldChainDesc": "从炖煮到送达全程4°C冷链，锁住新鲜",
    "innovation.coldChainStat": "全程恒温",
    "innovation.freshDaily": "当日鲜炖",
    "innovation.freshDailySub": "Fresh Daily",
    "innovation.freshDailyDesc": "坚持每日现炖，绝不隔夜，新鲜看得见",
    "innovation.freshDailyStat": "炖煮周期",
    "innovation.fullPortion": "足量实在",
    "innovation.fullPortionSub": "Full Portion",
    "innovation.fullPortionDesc": "拒绝缩水，每罐都是满满的真材实料",
    "innovation.fullPortionStat": "净含量",
    "order.title": "三步下单，",
    "order.subtitle": "新鲜到家",
    "order.step1": "WhatsApp咨询",
    "order.step1Desc": "一键联系，专属顾问在线解答",
    "order.step2": "选择口味",
    "order.step2Desc": "8款经典口味任你挑选",
    "order.step3": "冷链配送",
    "order.step3Desc": "专业冷链，新鲜到家",
    "order.whatsappOrder": "WhatsApp下单",
    "order.metaShop": "Meta店铺购买",
    "testimonials.realReviews": "Real Reviews",
    "testimonials.title": "客户",
    "testimonials.subtitle": "真心话",
    "testimonials.rating": "评分",
    "testimonials.repeatCustomer": "回购客户",
    "cta.title": "开启你的",
    "cta.subtitle": "新鲜之旅",
    "cta.description": "现在下单，享受专属新客优惠。每日限量鲜炖，先到先得！",
    "cta.whatsappOrder": "WhatsApp立即下单",
    "cta.metaShop": "前往Meta店铺",
    "cta.hours": "营业时间: 9:00-21:00",
    "cta.reply": "24h内回复",
    "footer.tagline": "新鲜不将就",
    "footer.description": "每日鲜炖燕窝花胶，用心守护您的健康与美丽。",
    "footer.products": "产品系列",
    "footer.birdNest": "即食燕窝系列",
    "footer.fishMaw": "鲜炖花胶系列",
    "footer.dessert": "燕窝甜品套餐",
    "footer.service": "服务支持",
    "footer.faq": "常见问题",
    "footer.shipping": "配送说明",
    "footer.contact": "联系我们",
    "footer.followUs": "关注我们",
    "footer.copyright": "版权所有",
    "flavors.original": "原味燕窝",
    "flavors.redDate": "红枣枸杞",
    "flavors.snowPear": "冰糖雪梨",
    "flavors.peachGum": "桃胶银耳",
    "flavors.coconut": "椰汁燕窝",
    "flavors.mango": "芒果燕窝",
    "flavors.fishMawOriginal": "花胶原味",
    "flavors.fishMawRedDate": "花胶红枣",
  },
  en: {
    "nav.products": "Products",
    "nav.benefits": "Benefits",
    "nav.howToOrder": "How to Order",
    "nav.testimonials": "Reviews",
    "header.whatsapp": "WhatsApp",
    "header.shop": "Shop Now",
    "hero.fresh": "Fresh",
    "hero.noCompromise": "No Compromise",
    "hero.subtitle": "LOVEYOUNG Bird's Nest & Fish Maw · Daily Fresh",
    "hero.description": "No preservatives, no overnight products. We insist on same-day cooking and cold chain delivery for the freshest nourishing experience.",
    "hero.orderNow": "Order Now",
    "hero.exploreFlavors": "Explore Flavors",
    "hero.repeatCustomers": "Repeat Customers",
    "hero.nextBatch": "Next Fresh Batch",
    "hero.giftBox": "Bird's Nest Gift Box",
    "hero.giftBoxDesc": "6 Jars · 120g each",
    "hero.original": "Original x2",
    "hero.redDate": "Red Date x2",
    "hero.fishMaw": "Fish Maw x2",
    "hero.giftPrice": "Gift Box Price",
    "hero.perBox": "/box",
    "hero.whatsappOrder": "WhatsApp Order",
    "hero.bestseller": "Best Seller",
    "stats.customers": "Happy Customers",
    "stats.flavors": "Flavor Choices",
    "stats.freshCycle": "Fresh Cycle",
    "stats.rating": "Satisfaction",
    "products.discovery": "Flavor Discovery",
    "products.explore": "Explore",
    "products.flavors": "8 Flavors",
    "products.viewAll": "View All",
    "innovation.whyDifferent": "Why Different",
    "innovation.title": "Innovation",
    "innovation.subtitle": "Beyond Limits",
    "innovation.description": "We redefine fresh-stewed bird's nest with technology and craftsmanship",
    "innovation.science": "Scientific Formula",
    "innovation.scienceSub": "Lab-Tested",
    "innovation.scienceDesc": "Precisely calculated portions for optimal nutritional balance",
    "innovation.scienceStat": "Nutrition Retained",
    "innovation.coldChain": "Cold Chain Fresh",
    "innovation.coldChainSub": "Cold Chain",
    "innovation.coldChainDesc": "Full 4°C cold chain from cooking to delivery",
    "innovation.coldChainStat": "Constant Temp",
    "innovation.freshDaily": "Daily Fresh",
    "innovation.freshDailySub": "Fresh Daily",
    "innovation.freshDailyDesc": "Made fresh daily, never overnight",
    "innovation.freshDailyStat": "Cooking Cycle",
    "innovation.fullPortion": "Full Portion",
    "innovation.fullPortionSub": "Full Portion",
    "innovation.fullPortionDesc": "No shortcuts, every jar is packed with real ingredients",
    "innovation.fullPortionStat": "Net Content",
    "order.title": "Three Steps,",
    "order.subtitle": "Fresh to Your Door",
    "order.step1": "WhatsApp Inquiry",
    "order.step1Desc": "One-click contact, dedicated consultant online",
    "order.step2": "Choose Flavors",
    "order.step2Desc": "8 classic flavors to choose from",
    "order.step3": "Cold Chain Delivery",
    "order.step3Desc": "Professional cold chain, fresh to your door",
    "order.whatsappOrder": "WhatsApp Order",
    "order.metaShop": "Meta Shop",
    "testimonials.realReviews": "Real Reviews",
    "testimonials.title": "Customer",
    "testimonials.subtitle": "Reviews",
    "testimonials.rating": "Rating",
    "testimonials.repeatCustomer": "Repeat Buyer",
    "cta.title": "Start Your",
    "cta.subtitle": "Fresh Journey",
    "cta.description": "Order now for exclusive new customer offers. Limited daily supply, first come first served!",
    "cta.whatsappOrder": "WhatsApp Order Now",
    "cta.metaShop": "Visit Meta Shop",
    "cta.hours": "Hours: 9:00AM-9:00PM",
    "cta.reply": "Reply within 24h",
    "footer.tagline": "Fresh, No Compromise",
    "footer.description": "Daily fresh-stewed bird's nest and fish maw, caring for your health and beauty.",
    "footer.products": "Products",
    "footer.birdNest": "Bird's Nest Series",
    "footer.fishMaw": "Fish Maw Series",
    "footer.dessert": "Dessert Sets",
    "footer.service": "Support",
    "footer.faq": "FAQ",
    "footer.shipping": "Shipping Info",
    "footer.contact": "Contact Us",
    "footer.followUs": "Follow Us",
    "footer.copyright": "All Rights Reserved",
    "flavors.original": "Original",
    "flavors.redDate": "Red Date Goji",
    "flavors.snowPear": "Rock Sugar Pear",
    "flavors.peachGum": "Peach Gum",
    "flavors.coconut": "Coconut",
    "flavors.mango": "Mango",
    "flavors.fishMawOriginal": "Fish Maw Original",
    "flavors.fishMawRedDate": "Fish Maw Red Date",
  },
  ms: {
    "nav.products": "Produk",
    "nav.benefits": "Kelebihan",
    "nav.howToOrder": "Cara Pesan",
    "nav.testimonials": "Ulasan",
    "header.whatsapp": "WhatsApp",
    "header.shop": "Kedai",
    "hero.fresh": "Segar",
    "hero.noCompromise": "Tiada Kompromi",
    "hero.subtitle": "LOVEYOUNG Sarang Burung & Pundi Ikan · Segar Setiap Hari",
    "hero.description": "Tiada pengawet, tiada produk semalam. Kami memasak pada hari yang sama dan penghantaran rantai sejuk untuk pengalaman paling segar.",
    "hero.orderNow": "Pesan Sekarang",
    "hero.exploreFlavors": "Terokai Rasa",
    "hero.repeatCustomers": "Pelanggan Setia",
    "hero.nextBatch": "Batch Segar Seterusnya",
    "hero.giftBox": "Set Hadiah Sarang Burung",
    "hero.giftBoxDesc": "6 Balang · 120g setiap satu",
    "hero.original": "Original x2",
    "hero.redDate": "Kurma Merah x2",
    "hero.fishMaw": "Pundi Ikan x2",
    "hero.giftPrice": "Harga Set Hadiah",
    "hero.perBox": "/kotak",
    "hero.whatsappOrder": "Pesan via WhatsApp",
    "hero.bestseller": "Terlaris",
    "stats.customers": "Pelanggan Gembira",
    "stats.flavors": "Pilihan Rasa",
    "stats.freshCycle": "Kitaran Segar",
    "stats.rating": "Kepuasan",
    "products.discovery": "Penemuan Rasa",
    "products.explore": "Terokai",
    "products.flavors": "8 Rasa",
    "products.viewAll": "Lihat Semua",
    "innovation.whyDifferent": "Mengapa Berbeza",
    "innovation.title": "Inovasi",
    "innovation.subtitle": "Tanpa Had",
    "innovation.description": "Kami mentakrifkan semula sarang burung segar dengan teknologi dan kemahiran",
    "innovation.science": "Formula Saintifik",
    "innovation.scienceSub": "Diuji Makmal",
    "innovation.scienceDesc": "Bahagian dikira dengan tepat untuk keseimbangan nutrisi optimum",
    "innovation.scienceStat": "Nutrisi Dikekal",
    "innovation.coldChain": "Rantai Sejuk",
    "innovation.coldChainSub": "Cold Chain",
    "innovation.coldChainDesc": "Rantai sejuk 4°C penuh dari memasak hingga penghantaran",
    "innovation.coldChainStat": "Suhu Tetap",
    "innovation.freshDaily": "Segar Harian",
    "innovation.freshDailySub": "Fresh Daily",
    "innovation.freshDailyDesc": "Dibuat segar setiap hari, tidak pernah bermalam",
    "innovation.freshDailyStat": "Kitaran Memasak",
    "innovation.fullPortion": "Bahagian Penuh",
    "innovation.fullPortionSub": "Full Portion",
    "innovation.fullPortionDesc": "Tiada jalan pintas, setiap balang dipenuhi bahan sebenar",
    "innovation.fullPortionStat": "Kandungan Bersih",
    "order.title": "Tiga Langkah,",
    "order.subtitle": "Segar ke Pintu Anda",
    "order.step1": "Pertanyaan WhatsApp",
    "order.step1Desc": "Hubungi satu klik, perunding khusus dalam talian",
    "order.step2": "Pilih Rasa",
    "order.step2Desc": "8 rasa klasik untuk dipilih",
    "order.step3": "Penghantaran Sejuk",
    "order.step3Desc": "Rantai sejuk profesional, segar ke pintu anda",
    "order.whatsappOrder": "Pesan WhatsApp",
    "order.metaShop": "Kedai Meta",
    "testimonials.realReviews": "Ulasan Sebenar",
    "testimonials.title": "Ulasan",
    "testimonials.subtitle": "Pelanggan",
    "testimonials.rating": "Penilaian",
    "testimonials.repeatCustomer": "Pembeli Setia",
    "cta.title": "Mulakan",
    "cta.subtitle": "Perjalanan Segar Anda",
    "cta.description": "Pesan sekarang untuk tawaran eksklusif pelanggan baru. Bekalan harian terhad, siapa cepat dia dapat!",
    "cta.whatsappOrder": "Pesan via WhatsApp",
    "cta.metaShop": "Lawati Kedai Meta",
    "cta.hours": "Waktu: 9:00PG-9:00MLM",
    "cta.reply": "Balas dalam 24j",
    "footer.tagline": "Segar, Tiada Kompromi",
    "footer.description": "Sarang burung dan pundi ikan segar setiap hari, menjaga kesihatan dan kecantikan anda.",
    "footer.products": "Produk",
    "footer.birdNest": "Siri Sarang Burung",
    "footer.fishMaw": "Siri Pundi Ikan",
    "footer.dessert": "Set Pencuci Mulut",
    "footer.service": "Sokongan",
    "footer.faq": "Soalan Lazim",
    "footer.shipping": "Info Penghantaran",
    "footer.contact": "Hubungi Kami",
    "footer.followUs": "Ikuti Kami",
    "footer.copyright": "Hak Cipta Terpelihara",
    "flavors.original": "Original",
    "flavors.redDate": "Kurma Merah Goji",
    "flavors.snowPear": "Pear Gula Batu",
    "flavors.peachGum": "Gam Pic",
    "flavors.coconut": "Kelapa",
    "flavors.mango": "Mangga",
    "flavors.fishMawOriginal": "Pundi Ikan Original",
    "flavors.fishMawRedDate": "Pundi Ikan Kurma",
  },
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>(() => {
    if (typeof window !== "undefined") {
      const saved = localStorage.getItem("loveyoung-language");
      if (saved && (saved === "zh" || saved === "en" || saved === "ms")) {
        return saved;
      }
    }
    return "zh";
  });

  useEffect(() => {
    localStorage.setItem("loveyoung-language", language);
  }, [language]);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
  };

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
}

export const languageLabels: Record<Language, string> = {
  zh: "中文",
  en: "EN",
  ms: "BM",
};
